# ğŸŒ¿ EcoPackAI

**AI-Powered Sustainable Packaging Recommendation System**

[![Python](https://img.shields.io/badge/Python-3.9+-3776AB?logo=python&logoColor=white)](https://python.org)
[![Flask](https://img.shields.io/badge/Flask-2.3+-000000?logo=flask&logoColor=white)](https://flask.palletsprojects.com)
[![scikit-learn](https://img.shields.io/badge/scikit--learn-1.3+-F7931E?logo=scikit-learn&logoColor=white)](https://scikit-learn.org)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-13+-336791?logo=postgresql&logoColor=white)](https://postgresql.org)
[![License: MIT](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

EcoPackAI recommends optimal eco-friendly packaging using machine learning trained on **600 real packaging materials** and **15,000 real shipping orders**.

---

## ğŸ“Š Model Performance

| Model | Purpose | Score |
|---|---|---|
| Random Forest Regressor | Cost Prediction | **RÂ² = 1.0000** |
| Random Forest Regressor | COâ‚‚ Prediction | **RÂ² = 0.9990** |
| Random Forest Classifier | Packaging Recommendation | **95.03% accuracy** |

---

## ğŸ—‚ï¸ Project Structure

```
ecopackai/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ app.py                        # Flask backend (9 API endpoints)
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â”œâ”€â”€ index.html                # Recommendation UI
â”‚   â”‚   â””â”€â”€ dashboard.html            # BI Analytics Dashboard
â”‚   â””â”€â”€ static/                       # CSS & JS assets
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ module1_data_collection.py    # Load + validate datasets â†’ PostgreSQL
â”‚   â”œâ”€â”€ module2_feature_engineering.py# Clean + engineer ML features
â”‚   â”œâ”€â”€ module3_ml_training.py        # Train & evaluate all 3 models
â”‚   â””â”€â”€ module7_bi_dashboard.py       # Generate charts + CSV reports
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ materials_database_600.xlsx   # â† Place your file here
â”‚   â”œâ”€â”€ real_packaging_history.xlsx   # â† Place your file here
â”‚   â”œâ”€â”€ materials_cleaned.csv         # Auto-generated by module1
â”‚   â”œâ”€â”€ materials_features.csv        # Auto-generated by module2
â”‚   â””â”€â”€ history_features.csv          # Auto-generated by module2
â”‚
â”œâ”€â”€ models/                           # Trained .pkl models (auto-generated)
â”‚   â”œâ”€â”€ rf_cost.pkl
â”‚   â”œâ”€â”€ rf_co2.pkl
â”‚   â”œâ”€â”€ rf_pkg.pkl
â”‚   â”œâ”€â”€ le_pkg.pkl / le_cat.pkl / le_ship.pkl
â”‚   â””â”€â”€ metrics.json
â”‚
â”œâ”€â”€ database/
â”‚   â””â”€â”€ schema.sql                    # PostgreSQL schema (4 tables + views)
â”‚
â”œâ”€â”€ outputs/                          # Charts + CSV reports
â”‚   â”œâ”€â”€ chart_*.png                   # 7 BI charts
â”‚   â”œâ”€â”€ sustainability_report.csv
â”‚   â”œâ”€â”€ packaging_performance_report.csv
â”‚   â””â”€â”€ top_materials_report.csv
â”‚
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_api.py                   # API endpoint tests
â”‚
â”œâ”€â”€ .env.example                      # Environment variable template
â”œâ”€â”€ .gitignore
â”œâ”€â”€ Procfile                          # Heroku / Render deployment
â”œâ”€â”€ render.yaml                       # Render one-click deploy config
â”œâ”€â”€ requirements.txt
â””â”€â”€ run.py                            # Local dev launcher
```

---

## âš¡ Quick Start (Local)

### 1. Clone & Install
```bash
git clone https://github.com/YOUR_USERNAME/ecopackai.git
cd ecopackai
pip install -r requirements.txt
```

### 2. Add Your Data Files
```bash
# Place your Excel files in the data/ folder:
cp /path/to/materials_database_600.xlsx data/
cp /path/to/real_packaging_history.xlsx data/
```

### 3. Configure Environment
```bash
cp .env.example .env
# Edit .env with your PostgreSQL credentials (optional â€” works without DB too)
```

### 4. Run the Data Pipeline
```bash
python scripts/module1_data_collection.py    # Load & validate data
python scripts/module2_feature_engineering.py# Engineer ML features
python scripts/module3_ml_training.py        # Train models
python scripts/module7_bi_dashboard.py       # Generate charts
```

### 5. Launch App
```bash
python run.py
```

Open: [http://localhost:5000](http://localhost:5000)

---

## ğŸŒ API Endpoints

| Method | Endpoint | Description |
|---|---|---|
| `GET` | `/` | Recommendation UI |
| `GET` | `/dashboard` | BI Analytics Dashboard |
| `POST` | `/api/recommend` | AI packaging recommendation |
| `GET` | `/api/materials` | Full material catalog |
| `GET` | `/api/stats` | Summary KPI metrics |
| `GET` | `/api/top_materials` | Top eco-graded materials |
| `GET` | `/api/packaging_usage` | Usage stats from real orders |
| `GET` | `/api/co2_trend` | Monthly COâ‚‚ time series |
| `GET` | `/api/category_stats` | Per-category sustainability |

### Sample Request
```bash
curl -X POST http://localhost:5000/api/recommend \
  -H "Content-Type: application/json" \
  -d '{
    "category": "Electronics",
    "shipping_mode": "Air",
    "weight_kg": 1.5,
    "distance_km": 1200,
    "length_cm": 30,
    "width_cm": 20,
    "height_cm": 15,
    "fragility": 8,
    "moisture_sensitive": 1
  }'
```

---

## ğŸš€ Deploy to Render (Free)

### Option A: One-Click (render.yaml)
1. Fork this repo
2. Go to [render.com](https://render.com) â†’ New â†’ Blueprint
3. Connect your GitHub repo
4. Render auto-reads `render.yaml` â†’ deploys everything

### Option B: Manual
1. New Web Service â†’ connect GitHub repo
2. **Build Command:** `pip install -r requirements.txt && python scripts/module1_data_collection.py && python scripts/module2_feature_engineering.py && python scripts/module3_ml_training.py`
3. **Start Command:** `gunicorn --chdir app app:app`
4. **Environment Variables:** (see `.env.example`)

---



The app runs in **offline mode** (CSV only) if no DB is configured.

---

## ğŸ”¬ Engineered Features

**Materials:**
- `co2_impact_index` = `0.65 Ã— (1 âˆ’ COâ‚‚_norm) + 0.35 Ã— biodegradable_flag`
- `cost_efficiency_index` = `performance / (cost_norm + Îµ)`, normalised 0â€“1
- `material_suitability_score` = `35%Ã—COâ‚‚ + 25%Ã—CEI + 20%Ã—strength + 10%Ã—density + 10%Ã—bio`

**History:**
- `volume_cm3`, `dimensional_weight_ratio`, `cost_per_km`, `co2_per_kg`, `month`, `day_of_week`

---

## ğŸ”‘ Key Sustainability Insights

| Insight | Finding |
|---|---|
| Furniture is highest-emission category | Avg 87 kg COâ‚‚/order |
| Wood Crates are worst packaging | 121 kg COâ‚‚ avg (31Ã— worse than PLA) |
| Mushroom Pkg dominates real orders | 38.8% of all 15,000 orders |
| Potential COâ‚‚ reduction | **94.4%** switching from worst â†’ best |
| Only 1 Grade A material | Single-Ply Corrugated Cardboard (score: 0.786) |

---

## ğŸ“„ License

MIT Â© EcoPackAI Project
